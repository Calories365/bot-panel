import{B as m}from"./BotsForm-fde65c25.js";import{_,c,r as y,o as b,y as a,a as u,b as h,u as n,d as k,e as f,f as o,g as v,n as w,F as g,j as i,q,s as B,k as x,L as I,i as S}from"./app-0435e394.js";import{u as A}from"./useHandleEvent-b8d05d3b.js";import"./BotsButtonWarning-1c54a521.js";const C=[{label:"Имя",key:"name",type:"default",emit_name:null,placeholder:"введите имя",action:null,required:!0},{label:"Токен",key:"token",type:"default",emit_name:null,placeholder:"введите токен",action:null},{label:"Вебхук",key:"web_hook",type:"default",emit_name:null,placeholder:"введите вебхук",action:null,required:!0},{label:"Тип бота",key:"type_id",type:"dropdown",emit_name:null,placeholder:"выберите тип",action:null,required:!0},{label:"Сообщение",key:"message",type:"textarea",emit_name:null,placeholder:"введите сообщение",action:null,required:!0},{label:"Фото",key:"message_image",type:"picture",emit_name:null,placeholder:"выберите фото",action:null},{label:"Активен",key:"active",type:"checkbox",emit_name:null,placeholder:"активен ли бот",action:null},{label:"Действия",key:"actions",type:"buttons",emit_name:null,placeholder:null,options:[{text:"Сохранить",button_type:"default",action:"submit"}]}],E=[{label:"Имя",key:"name",type:"default",emit_name:null,placeholder:"введите имя",action:null,required:!0},{label:"Токен",key:"token",type:"default",emit_name:null,placeholder:"введите токен",action:null},{label:"Вебхук",key:"web_hook",type:"default",emit_name:null,placeholder:"введите вебхук",action:null,required:!0},{label:"Тип бота",key:"type_id",type:"dropdown",emit_name:null,placeholder:"выберите тип",action:null,required:!0},{label:"Вордпресс эндпоинт",key:"wordpress_endpoint",type:"default",emit_name:null,placeholder:"введите вордпресс эндпоинт",action:null,required:!0},{label:"Активен",key:"active",type:"checkbox",emit_name:null,placeholder:"активен ли бот",action:null},{label:"Действия",key:"actions",type:"buttons",emit_name:null,placeholder:null,options:[{text:"Сохранить",button_type:"default",action:"submit"}]}],F=[{label:"Имя",key:"name",type:"default",emit_name:null,placeholder:"введите имя",action:null,required:!0},{label:"Токен",key:"token",type:"default",emit_name:null,placeholder:"введите токен",action:null},{label:"Вебхук",key:"web_hook",type:"default",emit_name:null,placeholder:"введите вебхук",action:null,required:!0},{label:"Тип бота",key:"type_id",type:"dropdown",emit_name:null,placeholder:"выберите тип",action:null,required:!0},{label:"Менеджера",key:"managers",type:"multiple_dropdown",emit_name:null,placeholder:"выберите менеджеров",action:null},{label:"Активен",key:"active",type:"checkbox",emit_name:null,placeholder:"активен ли бот",action:null},{label:"Действия",key:"actions",type:"buttons",emit_name:null,placeholder:null,options:[{text:"Сохранить",button_type:"default",action:"submit"}]}],H=[{label:"Имя",key:"name",type:"default",emit_name:null,placeholder:"введите имя",action:null,required:!0},{label:"Токен",key:"token",type:"default",emit_name:null,placeholder:"введите токен",action:null},{label:"Вебхук",key:"web_hook",type:"default",emit_name:null,placeholder:"введите вебхук",action:null,required:!0},{label:"Тип бота",key:"type_id",type:"dropdown",emit_name:null,placeholder:"выберите тип",action:null,required:!0},{label:"Сообщение",key:"message",type:"textarea",emit_name:null,placeholder:"введите сообщение",action:null,required:!0},{label:"Активен",key:"active",type:"checkbox",emit_name:null,placeholder:"активен ли бот",action:null},{label:"Действия",key:"actions",type:"buttons",emit_name:null,placeholder:null,options:[{text:"Сохранить",button_type:"default",action:"submit"}]}];const N=t=>(q("data-v-f6eb155d"),t=t(),B(),t),T={class:"col-md-12"},V={class:"card card-primary"},j=N(()=>o("div",{class:"card-header"}," Добавить бота ",-1)),D={name:"AddBot",setup(t){const d=c(()=>{if(Object.keys(l.value).length>0&&l.value.type_id)switch(l.value.type_id.type_id){case 2:return E;case 3:return F;case 4:return H;default:return C}return[]}),l=y({}),r=c(()=>a.getters[x.isSubmitting]);function s(){a.dispatch(u.createBot,l.value).then(e=>{S.push(`/showBots/${e.id}`)}).catch(e=>{console.error("Не удалось создать бота:",e)})}const{handleEvent:p}=A({localData:l,actions:{submit:s}});return b(()=>{a.dispatch(u.getBotTypes).then(e=>{l.value.type_id=e}),a.dispatch(u.getBotManagers).then(e=>{l.value.managers=e})}),(e,L)=>(i(),h(g,null,[n(r)?(i(),k(I,{key:0})):f("",!0),o("div",{class:w([{loading:n(r)},"row"])},[o("div",T,[o("div",V,[j,v(m,{data:l.value,rows:n(d),onHandle:n(p)},null,8,["data","rows","onHandle"])])])],2)],64))}},G=_(D,[["__scopeId","data-v-f6eb155d"]]);export{G as default};
