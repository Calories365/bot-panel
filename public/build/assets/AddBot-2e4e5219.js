import{B as m,u as _}from"./useHandleEvent-836b9e3b.js";import{_ as y,c,r as b,o as h,y as a,a as u,b as k,u as n,d as f,e as v,f as o,g as w,n as g,F as q,j as i,q as B,s as x,k as I,L as S,i as A}from"./app-0e5c4b28.js";import"./BotsButtonWarning-1aff3126.js";const C=[{label:"Имя",key:"name",type:"default",emit_name:null,placeholder:"введите имя",action:null,required:!0},{label:"Токен",key:"token",type:"default",emit_name:null,placeholder:"введите токен",action:null},{label:"Вебхук",key:"web_hook",type:"default",emit_name:null,placeholder:"введите вебхук",action:null,required:!0},{label:"Тип бота",key:"type_id",type:"dropdown",emit_name:null,placeholder:"выберите тип",action:null,required:!0},{label:"Сообщение",key:"message",type:"textarea",emit_name:null,placeholder:"введите сообщение",action:null,required:!0},{label:"Фото",key:"message_image",type:"picture",emit_name:null,placeholder:"выберите фото",action:null},{label:"Активен",key:"active",type:"checkbox",emit_name:null,placeholder:"активен ли бот",action:null},{label:"Действия",key:"actions",type:"buttons",emit_name:null,placeholder:null,options:[{text:"Сохранить",button_type:"default",action:"submit"}]}],E=[{label:"Имя",key:"name",type:"default",emit_name:null,placeholder:"введите имя",action:null,required:!0},{label:"Токен",key:"token",type:"default",emit_name:null,placeholder:"введите токен",action:null},{label:"Вебхук",key:"web_hook",type:"default",emit_name:null,placeholder:"введите вебхук",action:null,required:!0},{label:"Тип бота",key:"type_id",type:"dropdown",emit_name:null,placeholder:"выберите тип",action:null,required:!0},{label:"Вордпресс эндпоинт",key:"wordpress_endpoint",type:"default",emit_name:null,placeholder:"введите вордпресс эндпоинт",action:null,required:!0},{label:"Активен",key:"active",type:"checkbox",emit_name:null,placeholder:"активен ли бот",action:null},{label:"Действия",key:"actions",type:"buttons",emit_name:null,placeholder:null,options:[{text:"Сохранить",button_type:"default",action:"submit"}]}],F=[{label:"Имя",key:"name",type:"default",emit_name:null,placeholder:"введите имя",action:null,required:!0},{label:"Токен",key:"token",type:"default",emit_name:null,placeholder:"введите токен",action:null},{label:"Вебхук",key:"web_hook",type:"default",emit_name:null,placeholder:"введите вебхук",action:null,required:!0},{label:"Тип бота",key:"type_id",type:"dropdown",emit_name:null,placeholder:"выберите тип",action:null,required:!0},{label:"Менеджера",key:"managers",type:"multiple_dropdown",emit_name:null,placeholder:"выберите менеджеров",action:null},{label:"Активен",key:"active",type:"checkbox",emit_name:null,placeholder:"активен ли бот",action:null},{label:"Действия",key:"actions",type:"buttons",emit_name:null,placeholder:null,options:[{text:"Сохранить",button_type:"default",action:"submit"}]}],H=[{label:"Имя",key:"name",type:"default",emit_name:null,placeholder:"введите имя",action:null,required:!0},{label:"Токен",key:"token",type:"default",emit_name:null,placeholder:"введите токен",action:null},{label:"Вебхук",key:"web_hook",type:"default",emit_name:null,placeholder:"введите вебхук",action:null,required:!0},{label:"Тип бота",key:"type_id",type:"dropdown",emit_name:null,placeholder:"выберите тип",action:null,required:!0},{label:"Сообщение",key:"message",type:"textarea",emit_name:null,placeholder:"введите сообщение",action:null,required:!0},{label:"Активен",key:"active",type:"checkbox",emit_name:null,placeholder:"активен ли бот",action:null},{label:"Действия",key:"actions",type:"buttons",emit_name:null,placeholder:null,options:[{text:"Сохранить",button_type:"default",action:"submit"}]}];const N=t=>(B("data-v-f6eb155d"),t=t(),x(),t),T={class:"col-md-12"},V={class:"card card-primary"},j=N(()=>o("div",{class:"card-header"}," Добавить бота ",-1)),D={name:"AddBot",setup(t){const d=c(()=>{if(Object.keys(l.value).length>0&&l.value.type_id)switch(l.value.type_id.type_id){case 2:return E;case 3:return F;case 4:return H;default:return C}return[]}),l=b({}),r=c(()=>a.getters[I.isSubmitting]);function s(){a.dispatch(u.createBot,l.value).then(e=>{A.push(`/showBots/${e.id}`)}).catch(e=>{console.error("Не удалось создать бота:",e)})}const{handleEvent:p}=_({localData:l,actions:{submit:s}});return h(()=>{a.dispatch(u.getBotTypes).then(e=>{l.value.type_id=e}),a.dispatch(u.getBotManagers).then(e=>{l.value.managers=e})}),(e,L)=>(i(),k(q,null,[n(r)?(i(),f(S,{key:0})):v("",!0),o("div",{class:g([{loading:n(r)},"row"])},[o("div",T,[o("div",V,[j,w(m,{data:l.value,rows:n(d),onHandle:n(p)},null,8,["data","rows","onHandle"])])])],2)],64))}},$=y(D,[["__scopeId","data-v-f6eb155d"]]);export{$ as default};
