# Calories365: Calorie Counter with a Telegram Bot and AI

**Calories365** is a web application and Telegram bot that allows you to conveniently keep a food diary, automatically transcribe voice messages, and receive calorie statistics (using AI).

[//]: # (## [Try the Calorie Diary now!](https://calculator.calories365.com))

---

## 1. Project Overview

> **Record your food and see how many calories you consume.**

- **Calorie Diary**  
  In our web application, you can log everything you eat during the day. Either find a product in the extensive database or add your own entry — any personalized meal or ingredient will be recorded.

- **Visual Statistics**  
  Monitor your calorie consumption over various periods. Easily see if you are regularly exceeding your limits or staying within recommended values.

- **Telegram Bot**  
  Connect the bot via your personal account and enter data using **voice input**:
    1. Name the product — the bot will convert your speech to text and generate a list of items.
    2. If you do not specify the weight, the bot will suggest average values or generate nutritional info (BJU) using artificial intelligence.
    3. If needed, make corrections and save the entry in your diary with one click.

- **Voice Input on the Website**  
  Besides the bot, you can use voice input on the web application. On the dedicated “Voice Input” page, simply click “Record” and the system will transcribe your speech into text. If the product weight is not provided, the service will also offer options generated by artificial intelligence (or average values). Adjust the data as needed and save it in your diary.

- **Time Savings**  
  There is no need to open a website or install an additional application — just use Telegram. Alternatively, enjoy the convenience of voice input directly on our website, with daily statistics and quick data entry always at your fingertips.

Thus, if your goal is to **quickly** and **easily** count calories, Calories365 along with our bot and the “Voice Input” web page will be the ideal solution.

---

## 2. Technologies Used

- **Laravel** (with integrated packages **Laravel Sanctum** and **Laravel Fortify** for authentication and security)
- **MySQL** — Database for storing data (users, products, diary entries).
- **Redis** — For caching and session storage.
- **Meilisearch** — For searching through the product database.
- **Telegram SDK** — For Telegram integration.
- **FFmpeg** — For audio/video conversion (especially when processing voice messages).
- **Vue.js** — Frontend framework (SPA + dynamic forms/tables).
- **OAuth** — Authorization protocol (for Google sign-in).
- **Docker** — Containerization and orchestration (PHP-FPM, Nginx, MySQL, Redis).
- **Cloudflare** — For proxying and additional DNS/SSL-level security.

---

## 3. Architectural Features

### 3.1 Backend Architecture for Telegram Bots

The project includes a separate “Bot Panel” that implements a **Service Layer** for managing bots. Additionally, the **Bot Panel** functions as an admin dashboard where you can:

- **Add** and **configure** Telegram bots,
- **Monitor** users and bots,
- Interact with the message processing logic through an intuitive web interface.

Key aspects of the service layer:
1. The **Controller** receives an update from Telegram and passes it to the `TelegramHandler`.
2. The **TelegramHandler** determines which bot (strategy) is being used, processes the data through middlewares (Laravel Pipeline), and invokes the appropriate logic.
3. **Strategies** (for example, `CaloriesService`) inherit from a base class (`BaseService`), where handlers are registered:
    - `MessageUpdateHandler` (for processing texts, voice messages, images)
    - `CallbackQueryHandler` (for processing inline buttons)
    - And others.

This setup ensures the flexibility to add new bots and extensions.  
**More details**: [See the separate README on the bot service layer](./README.BotPanelArchitecture.en.md)

### 3.2 Dynamic Forms and Tables in Vue

The frontend is built with universal components:
- Forms are generated based on configurations: each object specifies a field (type, placeholder, required status, etc.).
- Tables are also configured via objects: each item in the array describes a column (name, cell type, character limit, and more).

This approach allows you to add or remove fields and columns without modifying the component code.  
**More details**: [See the separate README on dynamic forms/tables](./README.DynamicFormsAndTables.en.md)

---

## 4. Development Environment

- **Docker-Based Development:**  
  The setup automatically launches a development server along with Ngrok when started, providing remote access to the local environment.
- **Automatic Webhook Installation:**  
  When the service starts, the webhook for the bot is automatically set, streamlining integration and configuration.

---

## 5. CI/CD and Server Deployment

### Brief Overview

- Deployment is performed on a **dedicated server** configured with Cloudflare (DNS/SSL).
- **Docker + docker-compose**:  
  Each application (Calories365 and Bot Panel) consists of a set of containers (PHP, Nginx, Redis, MySQL, etc.) that communicate over the **Docker internal network**.
- **GitHub Actions:**  
  A push to the `main` branch automatically triggers a deployment to the server and a production build.

### Details

- In each of the **two services** (Calories365 and Bot Panel), you will find:
    - A **Dockerfile** that uses multi-stage builds (PHP, Node/Vite, Nginx).
    - A **docker-compose.yml** file describing the containers and their dependencies.
    - An **nginx.conf** file defining the virtual host (server blocks) for each service.

---

## 6. Conclusion

**Calories365** is a versatile tool for calorie counting and diet management:
- The **Telegram bot** saves you time with voice data entry.
- The **Voice Input on the website** increases convenience by enabling quick and easy product additions directly from your browser.
- The **Web application** offers visual statistics, a comprehensive product database, and an intuitive interface.
- The **Bot Panel** serves as an admin dashboard for bots, providing flexible configuration of Telegram logic and user monitoring.
- The **Architecture** (microservices within Docker, flexible configurations, CI/CD) facilitates further development and scalability.

If you need to **quickly** and **comfortably** manage your diet, our “Calories365” project—with its Telegram bot, voice input, and dynamic web dashboard—is the perfect solution!

---

> **Additionally**:
> - [**Bot Service Layer Architecture**](./README.BotPanelArchitecture.en.md)
> - [**Dynamic Forms and Tables in Vue**](./README.DynamicFormsAndTables.en.md)
