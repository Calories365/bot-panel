# Calories365: Лічильник калорій з Telegram-ботом та ШІ

**Calories365** — це веб-застосунок та Telegram-бот, що дозволяють зручно вести щоденник харчування, автоматично розшифровувати голосові повідомлення та отримувати статистику калорій (за допомогою ШІ).

[//]: # (## [Спробуйте Щоденник Калорій зараз!](https://calculator.calories365.com))

---

## 1. Огляд проекту

> **Запишіть вашу їжу та подивіться, скільки калорій ви споживаєте.**

- **Щоденник калорій**  
  У нашому веб-застосунку ви можете фіксувати все, що з'їли протягом дня. Знайдіть продукт у великій базі або додайте власний варіант — враховуються будь-які індивідуальні страви чи інгредієнти.

- **Візуальна статистика**  
  Відслідковуйте динаміку споживання калорій за різні періоди. Легко зрозумієте, якщо ви регулярно перевищуєте норму або, навпаки, перебуваєте у межах рекомендованих показників.

- **Telegram-бот**  
  Підключіть бота через особистий кабінет та вводьте дані за допомогою **голосового вводу**:
    1. Назвіть продукт — бот перетворить ваш голос на текст і сформує список страв.
    2. Якщо ви не вказали вагу, бот запропонує середні значення або згенерує інформацію про БЖУ за допомогою штучного інтелекту.
    3. За потреби внесіть корективи та збережіть запис у щоденнику одним кліком.

- **Голосовий ввід на сайті**  
  Крім бота, ви можете використовувати голосовий ввід у веб-застосунку. На окремій сторінці «Голосовий ввід» достатньо натиснути «Записати», і система розшифрує вашу мову у текст. Якщо вага продукту не вказана, сервіс також запропонує варіанти, згенеровані штучним інтелектом (або середні значення). За потреби відкоригуйте дані та збережіть їх у своєму щоденнику.

- **Заощадження часу**  
  Не потрібно відкривати веб-сайт або встановлювати додатковий застосунок — достатньо Telegram. Або ж скористайтеся зручним голосовим вводом безпосередньо на нашому сайті. Завжди під рукою щоденна статистика та швидке введення даних.

Отже, якщо ваша ціль — **швидко** та **зручно** рахувати калорії, Calories365 разом із нашим ботом і сторінкою «Голосовий ввід» стане ідеальним рішенням.

---

## 2. Використані технології

- **Laravel** (з підключеними пакетами **Laravel Sanctum** та **Laravel Fortify** для аутентифікації та безпеки)
- **MySQL** — СУБД для зберігання даних (користувачі, продукти, записи щоденника).
- **Redis** — кешування та зберігання сесій.
- **Meilisearch** — пошук по базі продуктів.
- **Telegram SDK** — інтеграція з Telegram.
- **FFmpeg** — конвертація аудіо/відео (особливо при обробці голосових повідомлень).
- **Vue.js** — фронтенд-фреймворк (SPA + динамічні форми/таблиці).
- **OAuth** — протокол авторизації (для входу через Google).
- **Docker** — контейнеризація та оркестрація (PHP-FPM, Nginx, MySQL, Redis).
- **Cloudflare** — проксирування та додаткова безпека на рівні DNS/SSL.

---

## 3. Архітектурні особливості

### 3.1 Backend-архітектура для Telegram-ботів

Проект включає окрему «Bot Panel», що реалізує **сервісний шар** для управління ботами. Крім того, **Bot Panel** функціонує як адміністративна панель, де ви можете:

- **Додавати** та **налаштовувати** Telegram-ботів,
- **Моніторити** користувачів і ботів,
- Взаємодіяти з логікою обробки повідомлень через зручний веб-інтерфейс.

Основні аспекти сервісного шару:
1. **Контролер** приймає оновлення від Telegram і передає його в `TelegramHandler`.
2. **TelegramHandler** визначає, який бот (стратегія) використовується, обробляє дані через проміжне програмне забезпечення (Laravel Pipeline) та викликає відповідну логіку.
3. **Стратегії** (наприклад, `CaloriesService`) наслідують базовий клас (`BaseService`), де реєструються обробники:
    - `MessageUpdateHandler` (для обробки текстів, голосових повідомлень, зображень)
    - `CallbackQueryHandler` (для обробки inline-кнопок)
    - та інші.

Це забезпечує гнучкість додавання нових ботів та розширень.  
**Детальніше**: [Дивись окремий README по сервісному шару ботів](./README.BotPanelArchitecture.ua.md)

### 3.2 Динамічні форми та таблиці у Vue

Фронтенд побудований за допомогою універсальних компонентів:
- Форми генеруються на основі конфігурацій: кожен об’єкт задає поле (тип, підказка, обов’язковість тощо).
- Таблиці також налаштовуються через конфігурації: кожен елемент масиву описує стовпець (назва, тип ячейки, ліміт символів та інше).

Такий підхід дозволяє додавати або видаляти поля та стовпці без зміни коду компонентів.  
**Детальніше**: [Дивись окремий README по динамічним формам/таблицям](./README.DynamicFormsAndTables.ua.md)

---

## 4. Середовище розробки

- **Розробка з використанням Docker:**  
  Налаштування передбачає автоматичний запуск дев-сервера разом з Ngrok при старті, що забезпечує віддалений доступ до локального середовища.
- **Автоматична установка вебхуку:**  
  При запуску сервісу вебхук для бота встановлюється автоматично, що спрощує інтеграцію та налаштування.

---

## 5. CI/CD та розгортання на сервері

### Коротко про налаштування

- Розгортання здійснюється на **виділеному сервері**, налаштованому під Cloudflare (DNS/SSL).
- **Docker + docker-compose**:  
  Кожен застосунок (Calories365 та Bot Panel) складається з набору контейнерів (PHP, Nginx, Redis, MySQL тощо), що взаємодіють через **внутрішню мережу Docker**.
- **GitHub Actions:**  
  При пуші в гілку `main` автоматично запускається деплой на сервер та створення production-збірки.

### Деталі

- У кожному з **двох сервісів** (Calories365 та Bot Panel) присутні:
    - **Dockerfile**, що використовує багатоступінчасту збірку (PHP, Node/Vite, Nginx).
    - **docker-compose.yml**, який описує контейнери та їх залежності.
    - **nginx.conf**, що задає віртуальний хост (серверні блоки) для кожного сервісу.

---

## 6. Висновок

**Calories365** — універсальний інструмент для підрахунку калорій та контролю за харчуванням:
- **Telegram-бот** економить ваш час завдяки голосовому введенню даних.
- **Голосовий ввід на сайті** розширює зручність роботи з сервісом завдяки швидкому та простому додаванню продуктів безпосередньо через браузер.
- **Веб-застосунок** пропонує візуальну статистику, широку базу продуктів та зручний інтерфейс.
- **Bot Panel** виконує роль адмінпанелі для ботів, забезпечуючи гнучке налаштування Telegram-логіки та моніторинг користувачів.
- **Архітектура** (мікросервіси у Docker, гнучкі конфігурації, CI/CD) спрощує подальший розвиток та масштабування.

Якщо вам потрібно **швидко** та **зручно** контролювати своє харчування, наш проект «Calories365» із Telegram-ботом, голосовим вводом і динамічним веб-кабінетом стане ідеальним рішенням!

---

> **Додатково**:
> - [**Архітектура сервісного шару (Bot Panel)**](./README.BotPanelArchitecture.ua.md)
> - [**Динамічні форми та таблиці у Vue**](./README.DynamicFormsAndTables.ua.md)
